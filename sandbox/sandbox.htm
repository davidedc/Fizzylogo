<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Fizzylogo sandbox</title>

  <link rel="stylesheet" href="./CodeMirror_files/docs.css">

  <link rel="stylesheet" href="./CodeMirror_files/codemirror.css">
  <script src="./CodeMirror_files/codemirror.js"></script>
  <script src="./CodeMirror_files/matchbrackets.js"></script>
  <script src="./CodeMirror_files/python.js"></script>
  <script src="./fizzylogo.js"></script>
  <style type="text/css">.CodeMirror {border: 1px solid black;}</style>
</head>

<body style="">
<div id="nav">
  <a href="http://google.com/"><h1>Fizzylogo</h1><img id="logo" src="./CodeMirror_files/logo.png"></a>

  <ul>
    <li><a href="http://google.com/">Link 1</a>
    </li><li><a href="http://google.com/">Link 2</a>
    </li><li><a href="http://google.com/">Link 3</a>
  </li></ul>
  <ul>
    <li><a href="http://google.com/">Link 4</a>
    </li><li><a class="active" href="http://google.com/">Link 5</a>
  </li></ul>
</div>

<article>
<h2>Fizzylogo</h2>

<div>

  <!-- left part, with code input and control buttons -->
  <div style="width: 49%; float: left;" >
    <textarea id="code" name="code" style="display: none;">console print 1+1</textarea>
    <button id="runAll"       onclick="return runAll();"        > run all        </button>
    <button id="runSelection" onclick="return runSelection();"  > run selection  </button>
    <button id="pause"        onclick="return runAll();"        > pause          </button>
    <button id="stop"         onclick="return runSelection();"  > stop           </button>
  </div>

  <script>
    var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
      mode: {name: "python",
             version: 3,
             singleLineStringErrors: false},
      lineNumbers: true,
      indentUnit: 4,
      matchBrackets: true
    });
    
  </script>

  <!-- right part, with the canvas and text output -->
  <div style="width: 49%; float: right;">

    <div>
      <canvas id="myCanvas" width="330" height="326"></canvas>
    </div>

    <div>
      <textarea id="output" name="output" rows="2" cols="80" style="width:100%;margin-bottom:-5px;">code output</textarea>
    </div>


  </div>

</div>

<script>

disablePauseAndStopButtons = function(){
  document.getElementById("pause").disabled = true;
  document.getElementById("stop").disabled = true;
}

enablePauseAndStopButtons = function(){
  document.getElementById("pause").disabled = false;
  document.getElementById("stop").disabled = false;
}

disablePauseAndStopButtons();

Fizzylogo.init(document.getElementById("output"));

runOneMoreStep = function(gen){
  done = gen.next().done;
  if (done) {
    disablePauseAndStopButtons();
  }
  else {
    enablePauseAndStopButtons();
    setTimeout(function(){ runOneMoreStep(gen); }, 0); }
  }

//gen = Fizzylogo.runOneStep("repeat forever:\nÔπçconsole print \"running\"");
gen = Fizzylogo.runOneStep("console print 1+1");
runOneMoreStep(gen);

</script>



  </article>
</body>
</html>